<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin Dashboard</title>
  <link rel="stylesheet" href="/static/css/admin.css" />
</head>
<body>
  <div class="top-bar">
    <div class="brand"> OneTap Admin</div>
    <a href="/logout">Logout</a>
  </div>
  

  <div class="section">
    <h2>All Meetings</h2>
    <button onclick="loadMeetings()">Refresh List</button>
    <table id="meetingsTable">
      <thead>
        <tr>
          <th>Title</th>
          <th>Date</th>
          <th>Code</th>
          <th>QR Code</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <div class="section">
    <h2>Create Meeting</h2>
    <form onsubmit="createMeeting(event)">
      <input type="text" id="meetingTitle" placeholder="Title" required /> <br />
      <input type="date" id="meetingDate" required /> <br />
      <button type="submit">Create Meeting</button>
    </form>
  </div>

  <div class="section">
    <h2>Members</h2>
    <button onclick="loadMembers()">Load Members</button>
    <button onclick="downloadCSV('/api/members/export')">Export Members</button>
    <table id="membersTable">
      <thead>
        <tr><th>Name</th><th>Email</th><th>Action</th></tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <div class="section">
    <h2>Attendance Records</h2>
    <label for="filterName">Filter by Member Name:</label>
    <input type="text" id="filterName" />
    <label for="filterDate">Filter by Date:</label>
    <input type="date" id="filterDate" />
    <button onclick="loadAttendance()">Filter</button>
    <button onclick="downloadCSV('/api/attendance/export')">Export Attendance</button>
    <table id="attendanceTable">
      <thead>
        <tr><th>Name</th><th>Email</th><th>Meeting</th><th>Date</th></tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  </div>
  <form action="/delete-account" method="post" style="display: inline;" onsubmit="return confirm('This will permanently delete your account and all data. Continue?')">
    <button type="submit" style="background-color: #dc3545; color: white; margin-left: 10px;">Delete My Account</button>
  </form>
  </div>

  <script src="/static/js/admin-dashboard.js"></script>
</body>
</html>
